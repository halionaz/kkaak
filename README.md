# 🐦‍⬛💰 kkaak

까악, 돈을 벌어다 주는 까마귀

GPT-4o mini를 활용한 **미국 주식 뉴스 기반 트레이딩 시그널 봇**입니다.
장전 및 실시간 뉴스를 AI로 분석하여 매수/매도/hold 시그널을 Discord로 전송합니다.

🇰🇷 **한국 시간 최적화**: 한국에서 미국 증시를 트레이딩하는 투자자를 위해 KST 기준으로 동작하며, 서머타임을 자동으로 반영합니다.

⚠️ **면책사항**: 이 봇은 투자 조언이 아닙니다. 모든 투자 결정과 손실은 사용자 책임입니다.

---

## ✨ 주요 기능

### 🔔 장전 리포트
매일 밤 **23시 (또는 서머타임 22시)**에 overnight 뉴스를 분석하여 20개 종목의 매수/매도 시그널을 Discord로 전송합니다.

### 🚨 실시간 모니터링
장중(23:30~06:00) **30분마다** 뉴스와 가격을 체크하여 중요한 변화가 있을 때만 알려줍니다.

### 📊 보수적 접근
- 신뢰도 85% 이상일 때만 강한 시그널 발생
- 매수 ↔ 매도 전환 시 높은 확신도 요구
- 중복 알림 방지로 노이즈 최소화

### 💰 백테스팅
장 마감 후 오늘의 시그널이 실제로 수익을 냈는지 자동으로 계산하여 보고합니다.

---

## 🚀 빠른 시작

### 1. 설치

```bash
git clone https://github.com/yourusername/kkaak.git
cd kkaak
pip install -r requirements.txt
```

### 2. API 키 설정

`.env.example`을 복사하여 `.env` 파일을 만들고 API 키를 입력하세요:

```bash
cp .env.example .env
```

**필요한 API 키:**
- [Massive.com](https://massive.com) - 뉴스 데이터
- [Finnhub](https://finnhub.io) - 주가 데이터
- [OpenAI](https://platform.openai.com) - AI 분석
- [Discord Webhook](https://discord.com) - 알림 전송

### 3. 종목 설정

`config/stocks.yaml`에서 모니터링할 20개 종목을 설정하세요.
기본값으로 Apple, Tesla, Nvidia 등 주요 종목이 설정되어 있습니다.

### 4. 실행

```bash
# 테스트 실행 (한 번만 실행)
python main.py --test

# 프로덕션 모드 (자동으로 계속 실행)
python main.py
```

---

## 📱 Discord 알림 예시

### 장전 리포트 (매일 밤 23시)
```
🔔 장전 리포트 2026-02-12 23:00

📈 매수 추천 (고확신):
• NVDA (90%) - AI 칩 수요 급증, 파트너십 확대
• AAPL (85%) - 신제품 발표 긍정적 전망

📊 보유 추천: 나머지 18개 종목
```

### 실시간 알림 (변경사항 발생 시)
```
🚨 긴급 시그널 - NVDA
BUY (90%) → 매수 추천

"Nvidia announces breakthrough AI chip"

현재가: $850.00 (+2.5%)
이유: AI 기술 혁신으로 시장 점유율 확대 예상
```

### 장후 백테스팅 (매일 새벽 6시)
```
📊 오늘의 트레이딩 결과

수익률: +2.3% ($230)
- 매수 3건 (승률: 67%)
- 최고 거래: NVDA +5.2%

보유 중: 5개 종목 (미실현 +$120)
```

---

## ⏰ 실행 시간

### 한국 시간 기준 (표준시)
- **23:00** - 장전 리포트 (overnight 뉴스 분석)
- **23:30 ~ 06:00** - 30분마다 실시간 모니터링
- **06:00** - 장후 백테스팅

### 서머타임 (3월~11월)
- **22:00** - 장전 리포트
- **22:30 ~ 05:00** - 실시간 모니터링
- **05:00** - 백테스팅

*서머타임은 자동으로 감지되며 별도 설정이 필요하지 않습니다.*

---

## 🛠️ 시스템 구조

```
뉴스 수집 (Massive API)
       ↓
가격 수집 (Finnhub API)
       ↓
AI 분석 (GPT-4o mini)
       ↓
시그널 생성 & 필터링
       ↓
포지션 추적 & 변경 감지
       ↓
Discord 알림
```

---

## 📁 프로젝트 구조

```
kkaak/
├── main.py              # 실행 파일
├── config/
│   └── stocks.yaml      # 모니터링 종목 설정
├── src/
│   ├── data/           # 뉴스/가격 수집
│   ├── analysis/       # AI 분석
│   ├── pipeline/       # 시그널 생성 & 관리
│   └── notification/   # Discord 알림
└── data/
    ├── signals/        # 시그널 히스토리
    └── logs/           # 로그 파일
```

---

## 🔧 문제 해결

### API 키 오류
```
❌ 필수 환경 변수 누락: MASSIVE_API_KEY
```
→ `.env` 파일에 모든 API 키가 입력되었는지 확인하세요.

### Discord 알림이 안 옴
Discord Webhook URL을 확인하고, 웹훅이 활성화되어 있는지 체크하세요.

### 더 자세한 기술 문서가 필요하면
`CLAUDE.md`를 참고하세요. 개발자를 위한 상세한 아키텍처, 데이터 모델, 설정 가이드가 있습니다.

---

## ⚠️ 법적 고지

- 본 소프트웨어는 **교육 및 연구 목적**으로 제공됩니다
- 실제 투자에 사용 시 발생하는 **모든 손실은 사용자 책임**입니다
- 제공되는 시그널은 **투자 조언이 아니며**, 참고용 정보입니다
- 주식 투자는 원금 손실 위험이 있습니다

---

## 📄 라이선스

MIT License

---

🐦‍⬛ 까악이 좋은 소식을 물어다 드릴게요! 💰
